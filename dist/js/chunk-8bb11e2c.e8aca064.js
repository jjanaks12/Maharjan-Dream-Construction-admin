(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8bb11e2c"],{"69e9":function(e,t,a){"use strict";var r=a("d4ec"),i=a("bee2"),n=a("262e"),s=a("2caf"),l=(a("b0c0"),a("9ab4")),o=a("1b40"),c=a("1dfe"),d=a("9426"),u=function(e){Object(n["a"])(a,e);var t=Object(s["a"])(a);function a(e){var i;return Object(r["a"])(this,a),i=t.call(this,e),i.showModal=!1,i.isDeleting=!1,i}return Object(i["a"])(a,[{key:"canEdit",get:function(){return"material"==this.$route.name}},{key:"render",value:function(){var e=this,t=arguments[0];return t("div",[t("div",{class:"bg-gray-900 rounded-lg flex justify-between p-3 text-gray-200"},[t("div",{class:"flex-grow"},[t("strong",{class:"text-2xl font-medium capitalize"},[this.material.name]),t("div",{class:"html-content",domProps:{innerHTML:this.material.excerpt}}),t("span",{class:"block not-italic text-gray-500 text-sm"},["in stock: ",this.material.quantity])]),t("div",{class:"pl-3 text-right flex-grow-0"},[t("div",{class:"action text-sm space-x-3 mb-3"},[t("a",{attrs:{href:"#"},class:"text-purple-400 hover:text-gray-400 transition",on:{click:this.toggleModal}},["view"]),this.canEdit?t("a",{attrs:{href:"#"},class:"text-red-400 hover:text-gray-400 transition",on:{click:this.toggleDelete}},["delete"]):null]),t("em",{class:"not-italic text-xl font-medium block leading-none"},["Rs. ",this.material.price]),t("span",{class:"text-sm text-gray-400 leading-none"},[this.material.measurement_unit])]),this.isDeleting?t("div",{class:"bg-black bg-opacity-30 w-40 flex flex-col p-4 items-center space-y-2 ml-3 rounded-md"},[t("a",{attrs:{href:"#"},class:"text-yellow-400 hover:text-gray-400 transition",on:{click:this.deleteMaterial}},["confirm"]),t("a",{attrs:{href:"#"},class:"text-green-400 hover:text-gray-400 transition",on:{click:this.toggleDelete}},["cancel"])]):null]),t(c["a"],{model:{value:e.showModal,callback:function(t){e.showModal=t}}},[t(d["a"],{attrs:{detail:this.material},on:{close:function(){e.showModal=!1}}})])])}},{key:"toggleModal",value:function(e){e&&e.preventDefault(),this.showModal=!this.showModal}},{key:"toggleDelete",value:function(e){e.preventDefault(),this.isDeleting=!this.isDeleting}},{key:"deleteMaterial",value:function(e){e.preventDefault(),this.$store.dispatch("material/destory",this.material.id)}}]),a}(o["c"]);Object(l["a"])([Object(o["b"])({required:!0})],u.prototype,"material",void 0),u=Object(l["a"])([o["a"]],u),t["a"]=u},"7db0":function(e,t,a){"use strict";var r=a("23e7"),i=a("b727").find,n=a("44d2"),s="find",l=!0;s in[]&&Array(1)[s]((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(s)},9426:function(e,t,a){"use strict";var r=a("5530"),i=a("1da1"),n=a("2638"),s=a.n(n),l=a("d4ec"),o=a("bee2"),c=a("262e"),d=a("2caf"),u=(a("96cf"),a("b0c0"),a("a4d3"),a("e01a"),a("d81d"),a("d3b7"),a("3ca3"),a("ddb0"),a("a434"),a("9ab4")),m=a("2f62"),p=a("7bb1"),h=a("1b40"),f=a("7f7e"),g=a("f481"),v=(a("7db0"),function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(e){var r;return Object(l["a"])(this,a),r=t.call(this,e),r.isOpen=!1,r.selectedOption={title:"",description:""},r}return Object(o["a"])(a,[{key:"mounted",value:function(){var e=this;this.$nextTick((function(){e.selectedOption=e.categoryList.find((function(t){return t.id===e.value}))||null}))}},{key:"render",value:function(){var e=this,t=arguments[0];return t("div",{class:"mt-1 relative",directives:[{name:"click-outside",value:this.close}]},[t("button",{attrs:{type:"button","aria-haspopup":"listbox","aria-expanded":"true","aria-labelledby":"listbox-label"},class:{"relative w-full bg-gray-700 text-gray-400 rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-default border border-transparent outline-none focus:outline-none sm:text-sm":!0,"border-red-700 text-red-700":this.invalid},on:{click:this.toggleDropdown}},[t("span",{class:"font-normal ml-3 block truncate"},[this.selectedOption?this.selectedOption.title:"Select One"]),t("span",{class:"ml-3 absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"}})])])]),t("div",{class:{"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-56 rounded-md py-1 text-base overflow-auto sm:text-sm":!0,hidden:!this.isOpen},attrs:{tabindex:"-1",role:"listbox","aria-labelledby":"listbox-label","aria-activedescendant":"listbox-option-3"}},[t("div",{class:"text-gray-900 cursor-default select-none relative py-2 pl-3 pr-9",attrs:{role:"option"},on:{click:function(){return e.changed(null)}}},[t("span",{class:"font-normal ml-3 block truncate"},["Select one"]),this.selectedOption?null:t("span",{class:"text-indigo-600 absolute inset-y-0 right-0 flex items-center pr-4"},[t("svg",{class:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"}})])])]),this.categoryList.map((function(a){return t("div",{class:"text-gray-900 cursor-default select-none relative py-2 pl-3 pr-9",attrs:{role:"option"},on:{click:function(){return e.changed(a)}}},[t("span",{class:"font-normal ml-3 block truncate"},[a.title]),e.selectedOption&&e.selectedOption.id==a.id?t("span",{class:"text-indigo-600 absolute inset-y-0 right-0 flex items-center pr-4"},[t("svg",{class:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"}})])]):null])}))])])}},{key:"toggleDropdown",value:function(e){e.preventDefault(),this.isOpen=!this.isOpen}},{key:"changed",value:function(e){var t;e?this.$emit("input",e.id):this.$emit("input",(null===(t=this.selectedOption)||void 0===t?void 0:t.id)||""),this.selectedOption=e,this.close()}},{key:"close",value:function(){this.isOpen=!1}}]),a}(h["c"]));Object(u["a"])([Object(h["b"])({required:!0})],v.prototype,"value",void 0),Object(u["a"])([Object(h["b"])({default:!1})],v.prototype,"invalid",void 0),v=Object(u["a"])([Object(h["a"])({computed:Object(r["a"])({},Object(m["c"])({categoryList:"material/getCategoryList"}))})],v);var b=v,x=a("307e"),y=function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(e){var r;return Object(l["a"])(this,a),r=t.call(this,e),r.isSaving=!1,r.maxSize=10,r.imageList=[],r.images=[],r.formData={name:"",excerpt:"",description:"",quantity:"",measurement_unit:"",price:"",material_category_id:""},r.errors={name:[],excerpt:[],description:[],quantity:[],measurement_unit:[],material_category_id:[],price:[]},r}return Object(o["a"])(a,[{key:"canEdit",get:function(){return"material"==this.$route.name}},{key:"mounted",value:function(){this.detail&&(this.formData={id:this.detail.id,name:this.detail.name,excerpt:this.detail.excerpt,description:this.detail.description,quantity:this.detail.quantity,price:this.detail.price,measurement_unit:this.detail.measurement_unit,material_category_id:this.detail.material_category_id},this.imageList=this.detail.images&&this.detail.images.length>0?this.detail.images:[])}},{key:"render",value:function(){var e=this,t=arguments[0];return t("form",{attrs:{action:"#",method:"POST"},class:"rounded-md overflow-hidden",on:{submit:this.formSubmitted}},[t("div",[t("div",{class:"px-4 py-5 bg-gray-900 space-y-6 sm:p-6 text-gray-700"},[t("div",[t("label",{attrs:{for:"name"},class:"block text-sm font-medium"},["Name"]),t("input",s()([{on:{input:function(t){t.target.composing||e.$set(e.formData,"name",t.target.value)}},attrs:{type:"text",name:"name",id:"name",readonly:!this.canEdit},class:{"bg-gray-700 appearance-none relative block w-full px-3 py-2 placeholder-gray-500 outline-none text-gray-400 border border-transparent rounded-md sm:text-sm":!0,"border-red-700 placeholder-red-700 text-red-700":this.errors.name.length>0},domProps:{value:e.formData.name}},{directives:[{name:"model",value:e.formData.name,modifiers:{}}]}]))]),t("div",[t("label",{attrs:{for:"excerpt"},class:"block text-sm font-medium"},["Excerpt"]),t("textarea",s()([{on:{input:function(t){t.target.composing||e.$set(e.formData,"excerpt",t.target.value)}},attrs:{name:"excerpt",id:"excerpt",readonly:!this.canEdit},class:{"bg-gray-700 appearance-none relative block w-full px-3 py-2 placeholder-gray-500 outline-none text-gray-400 border border-transparent rounded-md sm:text-sm":!0,"border-red-700 placeholder-red-700 text-red-700":this.errors.excerpt.length>0},domProps:{value:e.formData.excerpt}},{directives:[{name:"model",value:e.formData.excerpt,modifiers:{}}]}]))]),t("div",[t("label",{attrs:{for:"description"},class:"block text-sm font-medium"},["Description"]),this.canEdit?t(x["a"],{attrs:{invalid:this.errors.description.length>0},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)}}}):t("div",{class:"bg-gray-700 text-gray-400 w-full px-3 py-2 rounded-md sm:text-sm",domProps:{innerHTML:this.formData.description}})]),t("div",{class:"flex flex-wrap -mx-2"},[t("div",{class:"w-1/2 px-2 mb-6"},[t("label",{attrs:{for:"quantity"},class:"block text-sm font-medium"},["Quantity"]),t("input",s()([{on:{input:function(t){t.target.composing||e.$set(e.formData,"quantity",t.target.value)}},attrs:{type:"text",name:"quantity",id:"quantity",readonly:!this.canEdit},class:{"bg-gray-700 appearance-none relative block w-full px-3 py-2 placeholder-gray-500 outline-none text-gray-400 border border-transparent rounded-md sm:text-sm":!0,"border-red-700 placeholder-red-700 text-red-700":this.errors.quantity.length>0},domProps:{value:e.formData.quantity}},{directives:[{name:"model",value:e.formData.quantity,modifiers:{}}]}]))]),t("div",{class:"w-1/2 px-2 mb-6"},[t("label",{attrs:{for:"measurement_unit"},class:"block text-sm font-medium"},["Measurement Unit"]),t("input",s()([{on:{input:function(t){t.target.composing||e.$set(e.formData,"measurement_unit",t.target.value)}},attrs:{type:"text",name:"measurement_unit",id:"measurement_unit",readonly:!this.canEdit},class:{"bg-gray-700 appearance-none relative block w-full px-3 py-2 placeholder-gray-500 outline-none text-gray-400 border border-transparent rounded-md sm:text-sm":!0,"border-red-700 placeholder-red-700 text-red-700":this.errors.measurement_unit.length>0},domProps:{value:e.formData.measurement_unit}},{directives:[{name:"model",value:e.formData.measurement_unit,modifiers:{}}]}]))]),t("div",{class:"w-1/2 px-2"},[t("label",{attrs:{for:"price"},class:"block text-sm font-medium"},["Price"]),t("input",s()([{on:{input:function(t){t.target.composing||e.$set(e.formData,"price",t.target.value)}},attrs:{type:"text",name:"price",id:"price",readonly:!this.canEdit},class:{"bg-gray-700 appearance-none relative block w-full px-3 py-2 placeholder-gray-500 outline-none text-gray-400 border border-transparent rounded-md sm:text-sm":!0,"border-red-700 placeholder-red-700 text-red-700":this.errors.price.length>0},domProps:{value:e.formData.price}},{directives:[{name:"model",value:e.formData.price,modifiers:{}}]}]))]),t("div",{class:"w-1/2 px-2"},[t("label",{attrs:{for:"material_category_id"},class:"block text-sm font-medium"},["Material Category"]),this.categoryList.length>0?t(b,{attrs:{invalid:this.errors.material_category_id.length>0},model:{value:e.formData.material_category_id,callback:function(t){e.$set(e.formData,"material_category_id",t)}}}):null])]),t("div",{class:"grid grid-cols-4 gap-2"},[t("strong",{class:"col-span-full"},["Property Images"]),this.imageList.map((function(a,r){return t("div",{class:"bg-gray-800 border max-h-40 border-gray-800 rounded-md p-1 relative"},[t("img",{attrs:{src:a.image_url?a.image_url:a.file},class:"w-full h-full object-contain"}),e.canEdit?t("a",{attrs:{href:"#"},class:"text-red-900 hover:text-yellow-400 absolute top-0 right-0 transform  translate-x-1/2 -translate-y-1/2 transition transition-color",on:{click:function(t){return e.removeImage(t,r,a.id)}}},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},class:"h-6 w-6"},[t("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"}})])]):null])})),this.images.map((function(a,r){return t("div",{class:"bg-gray-800 border max-h-40 border-gray-800 rounded-md p-1 relative"},[t("img",{attrs:{src:a},class:"w-full h-full object-contain"}),t("a",{attrs:{href:"#"},class:"text-red-900 hover:text-yellow-400 absolute top-0 right-0 transform  translate-x-1/2 -translate-y-1/2 transition transition-color",on:{click:function(t){return e.removeImages(t,r)}}},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},class:"h-6 w-6"},[t("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"}})])])])})),this.canEdit?t("label",{class:"text-center mt-1 flex flex-col items-center px-6 pt-5 pb-6 border-2 border-gray-800 border-dashed rounded-md space-y-1"},[t("input",{attrs:{name:"file-upload",type:"file",accept:"image/*",multiple:!0},class:"sr-only",on:{change:this.fileHandler}}),t("svg",{class:"h-12 w-12 text-gray-400",attrs:{stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"}},[t("path",{attrs:{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]),t("div",{class:"flex text-sm text-gray-600"},["Upload an Image"]),t("p",{class:"text-xs"},["PNG, JPG, GIF up to 10MB"])]):null])]),this.canEdit?t("div",{class:"px-4 py-3 bg-gray-900 border-t border-gray-800 text-right sm:px-6"},[t("button",{attrs:{type:"submit",disabled:this.isSaving},class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 outline-none"},[this.isSaving?t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},class:"h-4 w-4 mr-1 relative animate-spin"},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"}})]):null,t("span",["Save"])])]):null]),this.hasError?t(g["a"],{attrs:{message:this.errorMessage}}):null])}},{key:"formSubmitted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.preventDefault(),this.resetErrorMessage(),e.next=4,Object(p["b"])(this.formData.name,"required",{name:"name"}).then((function(e){a.errors["name"]=e.errors}));case 4:return e.next=6,Object(p["b"])(this.formData.excerpt,"required",{name:"excerpt"}).then((function(e){a.errors["excerpt"]=e.errors}));case 6:return e.next=8,Object(p["b"])(this.formData.description,"required",{name:"description"}).then((function(e){a.errors["description"]=e.errors}));case 8:return e.next=10,Object(p["b"])(this.formData.quantity,"required",{name:"quantity"}).then((function(e){a.errors["quantity"]=e.errors}));case 10:return e.next=12,Object(p["b"])(this.formData.measurement_unit,"required",{name:"Measurement Unit"}).then((function(e){a.errors["measurement_unit"]=e.errors}));case 12:return e.next=14,Object(p["b"])(this.formData.material_category_id,"required",{name:"Material Category"}).then((function(e){a.errors["material_category_id"]=e.errors}));case 14:this.$nextTick((function(){a.hasError||(a.isSaving=!0,a.save(Object(r["a"])(Object(r["a"])({},a.formData),{},{images:a.images})).then((function(){a.$emit("close"),a.resetErrorMessage()})).catch((function(){})).finally((function(){a.isSaving=!1})))}));case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fileHandler",value:function(e){var t=this,a=e.target,r=a.files,i=[];if(r)for(var n=0;n<r.length;n++){var s=new FileReader,l=r.item(n);if(l){var o=l.size/1048576;if(o>this.maxSize)break;s.readAsDataURL(l),i.push(s)}}Promise.all(i).then((function(){i.forEach((function(e){e.onload=function(){e.result&&t.images.push(e.result)}}))}))}},{key:"removeImage",value:function(e,t,a){var r=this;e.preventDefault(),this.deleteImage(a).then((function(){r.imageList.splice(t,1)}))}},{key:"removeImages",value:function(e,t){e.preventDefault(),this.images.splice(t,1)}}]),a}(f["a"]);Object(u["a"])([Object(h["b"])()],y.prototype,"detail",void 0),y=Object(u["a"])([Object(h["a"])({computed:Object(r["a"])({},Object(m["c"])({categoryList:"material/getCategoryList"})),methods:Object(r["a"])({},Object(m["b"])({save:"material/save",deleteImage:"material/deleteImage"}))})],y);t["a"]=y},a434:function(e,t,a){"use strict";var r=a("23e7"),i=a("23cb"),n=a("a691"),s=a("50c4"),l=a("7b0b"),o=a("65f0"),c=a("8418"),d=a("1dde"),u=d("splice"),m=Math.max,p=Math.min,h=9007199254740991,f="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var a,r,d,u,g,v,b=l(this),x=s(b.length),y=i(e,x),w=arguments.length;if(0===w?a=r=0:1===w?(a=0,r=x-y):(a=w-2,r=p(m(n(t),0),x-y)),x+a-r>h)throw TypeError(f);for(d=o(b,r),u=0;u<r;u++)g=y+u,g in b&&c(d,u,b[g]);if(d.length=r,a<r){for(u=y;u<x-r;u++)g=u+r,v=u+a,g in b?b[v]=b[g]:delete b[v];for(u=x;u>x-r+a;u--)delete b[u-1]}else if(a>r)for(u=x-r;u>y;u--)g=u+r-1,v=u+a-1,g in b?b[v]=b[g]:delete b[v];for(u=0;u<a;u++)b[u+y]=arguments[u+2];return b.length=x-r+a,d}})}}]);
//# sourceMappingURL=chunk-8bb11e2c.e8aca064.js.map