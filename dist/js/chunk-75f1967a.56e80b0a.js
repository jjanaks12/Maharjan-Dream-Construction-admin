(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75f1967a"],{"07ac":function(e,t,r){var a=r("23e7"),s=r("6f53").values;a({target:"Object",stat:!0},{values:function(e){return s(e)}})},"2b47":function(e,t,r){"use strict";r.r(t);var a=r("5530"),s=r("1da1"),n=r("d4ec"),o=r("bee2"),i=r("262e"),l=r("2caf"),d=(r("96cf"),r("4de4"),r("d3b7"),r("d81d"),r("b0c0"),r("a15b"),r("07ac"),r("caad"),r("9ab4")),u=r("1b40"),c=r("2f62"),m=r("c1df"),p=r.n(m),f=r("be07"),h=(r("2532"),r("f8f3")),v=r("90c0"),b=r("1dfe"),g=r("2638"),y=r.n(g),x=r("7bb1"),D=r("7f7e"),w=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(e){var a;return Object(n["a"])(this,r),a=t.call(this,e),a.isSaving=!1,a.formData={order_status:h["a"].PROCESSING,order_id:"",delivery_date:null},a.errors={delivery_date:[]},a}return Object(o["a"])(r,[{key:"mounted",value:function(){this.formData.order_id=this.order.id}},{key:"render",value:function(){var e=this,t=arguments[0];return t("form",{attrs:{method:"POST"},class:"rounded-md overflow-hidden px-4 py-5 bg-gray-900 space-y-6 sm:p-6 text-gray-700",on:{submit:this.formSubmitted}},[t("div",{class:"mb-6"},[t("label",{attrs:{for:"delivery_date"},class:"block text-sm font-medium"},["Delivery Date"]),t("input",y()([{on:{input:function(t){t.target.composing||e.$set(e.formData,"delivery_date",t.target.value)}},attrs:{type:"date",name:"delivery_date",id:"delivery_date"},class:{"bg-gray-700 appearance-none relative block w-full px-3 py-2 placeholder-gray-500 outline-none text-gray-400 border border-transparent rounded-md sm:text-sm":!0,"border-red-700 placeholder-red-700 text-red-700":this.errors.delivery_date.length>0},domProps:{value:e.formData.delivery_date}},{directives:[{name:"model",value:e.formData.delivery_date,modifiers:{}}]}]))]),t("div",{class:"px-4 py-3 bg-gray-900 border-t border-gray-800 text-right sm:px-6"},[t("button",{attrs:{type:"submit",disabled:this.isSaving},class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 outline-none"},[this.isSaving?t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},class:"h-4 w-4 mr-1 relative animate-spin"},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"}})]):null,t("span",["Save"])])])])}},{key:"formSubmitted",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.preventDefault(),this.resetErrorMessage(),e.next=4,Object(x["b"])(this.formData.delivery_date,"required",{name:"delivery_date"}).then((function(e){r.errors["delivery_date"]=e.errors}));case 4:this.$nextTick((function(){r.hasError||(r.isSaving=!0,r.save(r.formData).then((function(){r.$emit("close"),r.resetErrorMessage()})).catch((function(){})).finally((function(){r.isSaving=!1})))}));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(D["a"]);Object(d["a"])([Object(u["b"])({required:!0})],w.prototype,"order",void 0),w=Object(d["a"])([Object(u["a"])({methods:Object(a["a"])({},Object(c["b"])({save:"order/updateOrderStatus"}))})],w);var O=w,k=r("0708"),j=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(e){var a;return Object(n["a"])(this,r),a=t.call(this,e),a.modalStatus=!1,a.showDetail=!1,a}return Object(o["a"])(r,[{key:"mounted",value:function(){this.$route.query.order===this.order.id&&(this.showDetail=!0)}},{key:"isOrderDisabled",get:function(){return![h["a"].PENDING,h["a"].PROCESSING].includes(this.order.order_status)}},{key:"isPaymentDisabled",get:function(){return this.isOrderDisabled||h["b"].PAID==this.order.payment_status}},{key:"render",value:function(){var e,t=this,r=arguments[0];return r("div",{class:"flex items-start text-sm"},[r("div",{class:"flex-grow"},[r("em",{class:"not-italic"},[p()(this.order.ordered_at).format("Do [of] MMM, YYYY [at] hh:mm a")]),r("strong",{class:"block"},[r("span",{class:"font-normal"},["Order by"])," ",null===(e=this.order.user)||void 0===e?void 0:e.name]),this.order.delivery_date?r("span",{class:"text-xs"},["Will be delivered in ",p()(this.order.delivery_date).format("Do [of] MMM, YYYY")]):null]),r("div",{class:"flex items-center space-x-2"},[r("span",{class:"text-xs"},["Order status"]),r(v["a"],{attrs:{disabled:this.isOrderDisabled,opener:function(){return r("span",{class:{"text-blue-500":t.order.order_status===h["a"].PENDING,"text-green-500":t.order.order_status===h["a"].SHIPPED,"text-yellow-500":t.order.order_status===h["a"].PROCESSING,"text-red-500":t.order.order_status===h["a"].CANCELLED,"text-purple-500":t.order.order_status===h["a"].COMPLETED,"font-semibold":!0}},["• ",t.order.order_status])}}},[r("ul",{class:"text-xs text-right"},[Object.values(h["a"]).map((function(e){return r("li",[r("a",{attrs:{href:"#"},class:{"text-blue-500":e===h["a"].PENDING,"text-green-500":e===h["a"].SHIPPED,"text-yellow-500":e===h["a"].PROCESSING,"text-red-500":e===h["a"].CANCELLED,"text-purple-500":e===h["a"].COMPLETED,"text-white p-1 block":!0},on:{click:function(r){r.preventDefault(),e===h["a"].PROCESSING?t.modalStatus=!0:t.updateOrderStatus({order_id:t.order.id||"",order_status:e})}}},["• ",e])])}))])]),r("span",{class:"text-xs"},["Payment status"]),r(v["a"],{attrs:{disabled:this.isPaymentDisabled,opener:function(){return r("span",{class:{"text-green-500":t.order.payment_status===h["b"].PAID,"text-red-500":t.order.payment_status===h["b"].UNPAID,"font-semibold":!0}},["• ",t.order.payment_status])}}},[r("ul",{class:"text-xs text-right"},[Object.values(h["b"]).map((function(e){return r("li",[r("a",{attrs:{href:"#"},class:{"text-green-500":e===h["b"].PAID,"text-red-500":e===h["b"].UNPAID,"text-white p-1 block":!0},on:{click:function(r){r.preventDefault(),t.updatePaymentStatus({order_id:t.order.id||"",payment_status:e})}}},["• ",e])])}))])]),r("a",{attrs:{href:"#"},class:"text-purple-500 hover:text-gray-500 transition-colors",on:{click:function(e){e.preventDefault(),t.showDetail=!0,t.$router.push({name:"orders",query:{order:t.order.id}})}}},["view"])]),r(b["a"],{model:{value:t.modalStatus,callback:function(e){t.modalStatus=e}}},[r(O,{attrs:{order:this.order},on:{close:function(){return t.modalStatus=!1}}})]),r(b["a"],{on:{input:function(e){e||(t.showDetail=!1,t.$router.push({name:"orders"}))}},model:{value:t.showDetail,callback:function(e){t.showDetail=e}}},[r(k["a"],{attrs:{"order-id":this.order.id}})])])}}]),r}(u["c"]);Object(d["a"])([Object(u["b"])({required:!0})],j.prototype,"order",void 0),j=Object(d["a"])([Object(u["a"])({methods:Object(a["a"])({},Object(c["b"])({updateOrderStatus:"order/updateOrderStatus",updatePaymentStatus:"order/updatePaymentStatus"}))})],j);var _=j,P=p()().format("YYYY-MM-DD"),S=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(e){var a;return Object(n["a"])(this,r),a=t.call(this,e),a.formData={startDate:p()().startOf("months").format("YYYY-MM-DD")},a.isLoading=!1,a.errors={startDate:[],endDate:[],status:[],payment_status:[]},a}return Object(o["a"])(r,[{key:"mounted",value:function(){this.formData=this.value}},{key:"onValueChanged",value:function(){this.formData=this.value}},{key:"maxDate",get:function(){return P}},{key:"render",value:function(){var e=this,t=arguments[0];return t("div",{class:"bg-gray-900 p-2 text-gray-700 rounded-md overflow-hidden mt-4"},[t("form",{attrs:{method:"POST"},class:"flex flex-wrap -mx-2",on:{submit:this.formSubmitted}},[t("div",{class:"w-1/4 px-2"},[t("label",{attrs:{for:"of_start_date"},class:"block text-sm font-medium"},["Delivery Date"]),t("input",y()([{on:{input:function(t){t.target.composing||e.$set(e.formData,"startDate",t.target.value)}},attrs:{type:"date",name:"start_date",id:"of_start_date",max:this.maxDate},class:{"bg-gray-700 appearance-none relative block w-full px-3 py-2 placeholder-gray-500 outline-none text-gray-400 border border-transparent rounded-md sm:text-sm":!0,"border-red-700 placeholder-red-700 text-red-700":this.errors.startDate.length>0},domProps:{value:e.formData.startDate}},{directives:[{name:"model",value:e.formData.startDate,modifiers:{}}]}]))]),t("div",{class:"w-1/4 px-2"},[t("label",{attrs:{for:"of_end_date"},class:"block text-sm font-medium"},["Delivery Date"]),t("input",y()([{on:{input:function(t){t.target.composing||e.$set(e.formData,"endDate",t.target.value)}},attrs:{type:"date",name:"end_date",id:"of_end_date",min:this.formData.startDate},class:{"bg-gray-700 appearance-none relative block w-full px-3 py-2 placeholder-gray-500 outline-none text-gray-400 border border-transparent rounded-md sm:text-sm":!0,"border-red-700 placeholder-red-700 text-red-700":this.errors.endDate.length>0},domProps:{value:e.formData.endDate}},{directives:[{name:"model",value:e.formData.endDate,modifiers:{}}]}]))]),t("div",{class:"w-1/4 px-2"},[t("label",{attrs:{for:"of_order_status"},class:"block text-sm font-medium"},["Order Status"]),t("select",y()([{on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.formData,"status",t.target.multiple?r:r[0])}},attrs:{type:"date",name:"end_date",id:"of_order_status"},class:{"bg-gray-700 appearance-none relative block w-full px-3 py-2 placeholder-gray-500 outline-none text-gray-400 border border-transparent rounded-md sm:text-sm":!0,"border-red-700 placeholder-red-700 text-red-700":this.errors.status.length>0}},{directives:[{name:"model",value:e.formData.status,modifiers:{}}]}]),[t("option",{attrs:{value:""}}),t("option",{domProps:{value:h["a"].PENDING}},["Pending"]),t("option",{domProps:{value:h["a"].PROCESSING}},["Processing"]),t("option",{domProps:{value:h["a"].CANCELLED}},["Cancelled"]),t("option",{domProps:{value:h["a"].SHIPPED}},["Shipped"]),t("option",{domProps:{value:h["a"].COMPLETED}},["Completed"])])]),t("div",{class:"w-1/4 px-2"},[t("label",{attrs:{for:"of_payment_status"},class:"block text-sm font-medium"},["Payment Status"]),t("select",y()([{on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.formData,"payment_status",t.target.multiple?r:r[0])}},attrs:{type:"date",name:"end_date",id:"of_payment_status"},class:{"bg-gray-700 appearance-none relative block w-full px-3 py-2 placeholder-gray-500 outline-none text-gray-400 border border-transparent rounded-md sm:text-sm":!0,"border-red-700 placeholder-red-700 text-red-700":this.errors.payment_status.length>0}},{directives:[{name:"model",value:e.formData.payment_status,modifiers:{}}]}]),[t("option",{attrs:{value:""}}),t("option",{domProps:{value:h["b"].PAID}},["Paid"]),t("option",{domProps:{value:h["b"].UNPAID}},["Unpaid"])])]),t("div",{class:"flex-grow bg-gray-900 border-t border-gray-800 text-right mt-2 pt-2 px-2"},[t("button",{attrs:{type:"submit"},class:"min-w-40 inline-flex justify-center items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 transition"},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},class:"h-6 w-6 inline-block align-middle mr-2"},[this.isLoading?t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"}}):t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"}})]),"Apply Filter"])])])])}},{key:"formSubmitted",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.preventDefault(),this.resetErrorMessage(),e.next=4,Object(x["b"])(this.formData.startDate,"required",{name:"startDate"}).then((function(e){r.errors["startDate"]=e.errors}));case 4:this.$nextTick((function(){r.hasError||(r.isLoading=!0,r.fetch({params:r.formData}).finally((function(){r.isLoading=!1,r.$emit("close"),r.$emit("input",r.formData)})))}));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(D["a"]);Object(d["a"])([Object(u["b"])({required:!0})],S.prototype,"value",void 0),Object(d["a"])([Object(u["d"])("value")],S.prototype,"onValueChanged",null),S=Object(d["a"])([Object(u["a"])({methods:Object(a["a"])({},Object(c["b"])({fetch:"order/fetch"}))})],S);var E=S,N=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(e){var a;return Object(n["a"])(this,r),a=t.call(this,e),a.isLoading=!1,a.showOrderFilter=!1,a.filter={startDate:p()().startOf("months").format("YYYY-MM-DD")},a}return Object(o["a"])(r,[{key:"mounted",value:function(){this.fetchRecord(),this.$forceUpdate()}},{key:"render",value:function(){var e=this,t=arguments[0];return t("div",{class:"py-8"},[t("div",{class:"container mx-auto px-2"},[t("header",{class:"mb-10"},[t("h2",{class:"text-3xl font-bold text-gray-500 capitalize sm:truncate"},["Order"]),t("div",{class:"flex items-center space-x-3 justify-end"},[this.refreshBTN(),t("span",["•"]),this.filterBTN(),t("span",["•"]),this.downloadBTN()]),t(E,{on:{close:function(){e.showOrderFilter=!1}},model:{value:e.filter,callback:function(t){e.filter=t}}})]),this.list.length>0?this.list.map((function(r,a){return t(_,{class:{"pb-3 mb-4 border-b border-gray-700":a!==e.list.length-1},attrs:{order:r}})})):t("span",["No orders yet ",this.refreshBTN()])])])}},{key:"fetchRecord",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this.fetch({params:this.filter});case 3:this.isLoading=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"refreshBTN",value:function(){var e=this,t=this.$createElement;return t("a",{attrs:{href:"#"},class:"text-yellow-500 text-sm hover:text-gray-500 transition-colors",on:{click:function(t){t.preventDefault(),e.fetchRecord()}}},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},class:{"h-4 w-4 inline-block align-middle mr-1":!0,"animate-spin":this.isLoading}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"}})]),"refresh"])}},{key:"downloadBTN",value:function(){var e=this,t=this.$createElement;return t("a",{attrs:{href:"#"},class:"text-green-500 text-sm hover:text-gray-500 transition-colors",on:{click:function(t){t.preventDefault(),Object(f["a"])(e.list.map((function(e){return{id:e.id,materials:e.material.map((function(e){return{id:e.id,name:e.name,price:e.price}})),address:e.delivery_address,delivery_charge:e.delivery_charge,total:e.total}})),"Order records from "+Object.values(e.filter).join("-"))}}},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},class:"h-6 w-6 inline-block align-middle"},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}})]),"download"])}},{key:"filterBTN",value:function(){var e=this,t=this.$createElement;return t("a",{attrs:{href:"#"},class:"text-purple-500 text-sm hover:text-gray-500 transition-colors",on:{click:function(t){t.preventDefault(),e.showOrderFilter=!0}}},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},class:"h-6 w-6 inline-block align-middle"},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"}})]),"filter"])}}]),r}(u["c"]);Object(d["a"])([Object(u["b"])({default:"realstate",validator:function(e){return["realstate","rent"].includes(e)}})],N.prototype,"type",void 0),Object(d["a"])([Object(u["b"])({default:null})],N.prototype,"realstateId",void 0),Object(d["a"])([Object(u["b"])({default:null})],N.prototype,"rentId",void 0),N=Object(d["a"])([Object(u["a"])({computed:Object(a["a"])({},Object(c["c"])({list:"order/list"})),methods:Object(a["a"])({},Object(c["b"])({fetch:"order/fetch"}))})],N);t["default"]=N},"6f53":function(e,t,r){var a=r("83ab"),s=r("e330"),n=r("df75"),o=r("fc6a"),i=r("d1e7").f,l=s(i),d=s([].push),u=function(e){return function(t){var r,s=o(t),i=n(s),u=i.length,c=0,m=[];while(u>c)r=i[c++],a&&!l(s,r)||d(m,e?[r,s[r]]:s[r]);return m}};e.exports={entries:u(!0),values:u(!1)}}}]);
//# sourceMappingURL=chunk-75f1967a.56e80b0a.js.map